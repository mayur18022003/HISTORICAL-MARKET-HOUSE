<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login Page</title>
    <script src="https://kit.fontawesome.com/bbd157cb26.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header id="main-header">
        <div class="container">

            <nav>
                <div class="container">
                    <div class="logo">
                        <h1>Historical E-Commerce Website</h1>
                        <!-- Name of the web application -->
                    </div>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="shop.html">Shop</a></li>
                        <li><a href="Aboutus.html">About</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contactus.html">Contact</a></li>
                    </ul>

                    <div class="user-options">
                        <a href="#" class="user-icon" id="userIcon"><i class="fa-solid fa-user fa-xl" style="color: #ffffff; margin-right: 10px;"></i></a>
                        <!-- Sign in icon or link -->
                        <div class="dropdown-content" id="dropdownContent">
                            <a href="login.html">Log In</a>
                            <a href="signup.html">Sign Up</a>
                            <a href="profile.htm">Account</a>

                        </div>
                        <a href="cart.html"><i class="fa-solid fa-cart-shopping fa-xl" style="color: #ffffff; margin-left: 20px"></i></a>
                        <!-- Cart icon or link -->
                    </div>
                </div>
            </nav>

        </div>
    </header>

    <div class="containerlogin">
        <div id="login-container" class="login-container">
            <div class="logolog">
                <img src="images\logo-removebg-preview.png" alt="Ecom App Logo">
            </div>
            <h2 style="margin-bottom:20px;">Login</h2>

            <input type="email" id="email" placeholder="Email Address">
            <input type="password" id="password" placeholder="Password" style="margin-bottom:50px;">
            <a href="#" id="forgot-password">Forgot Password?<br> </a>

            <button id="login-btn" style="margin-top:10px; margin-bottom:10px;">Login</button>
            <br>
            <a href="signup.html" id="signuppage">Signup</a>
        </div>
    </div>

    <footer class="footer">

        <div class="footer-top">
            <div class="containerfooter">

                <div class="footer-brand">

                    <a href="#" class="logo">
                        <img class="imglogo" src="images/logo-removebg-preview.png" alt="Casmart logo">
                    </a>

                    <p class="footer-text">
                        Historical Ecom is a fashion theme for presents a complete wardrobe of uniquely crafted Idols, Boxes, Mask and Heads, Candle Stand,Christian Arts, Kitchen Ware, Folk Art.
                    </p>

                    <ul class="social-list">

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-facebook-f fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-x-twitter fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-instagram fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-pinterest-p fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                    </ul>

                </div>

                <ul class="footer-list">

                    <li>
                        <p class="footer-list-title">Information</p>
                    </li>

                    <li>
                        <a href="#" class="footer-link">About Company</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Payment Type</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Awards Winning</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">World Media Partner</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Become an Agent</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Refund Policy</a>
                    </li>

                </ul>

                <ul class="footer-list">

                    <li>
                        <p class="footer-list-title">Category</p>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Idols</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Boxes</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Masks And Heads</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Candle Stand</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Christian Art</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Prints And Oleographs</a>
                    </li>

                </ul>

                <ul class="footer-list">

                    <li>
                        <p class="footer-list-title">Help & Support</p>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Dealers & Agents</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">FAQ Information</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Return Policy</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Shipping & Delivery</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Order Tranking</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">List of Shops</a>
                    </li>

                </ul>

            </div>
        </div>

        <div class="footer-bottom">
            <div class="containerfooterbtm">

                <p class="copyright">
                    &copy; 2022 <a href="#">MayurKumbhar</a>. All Rights Reserved
                </p>

                <ul class="footer-bottom-list">

                    <li>
                        <a href="#" class="footer-bottom-link">Privacy Policy</a>
                    </li>

                    <li>
                        <a href="#" class="footer-bottom-link">Terms & Conditions</a>
                    </li>

                    <li>
                        <a href="#" class="footer-bottom-link">Sitemap</a>
                    </li>

                </ul>

                <div class="payment">
                    <p class="payment-title">We Support</p>

                    <img src="images/payment-img.png" alt="Online payment logos" class="payment-img">
                </div>

            </div>
        </div>

    </footer>

    <script>
        // Function to retrieve user data array from local storage
        function getUserDataArrayFromLocalStorage() {
            const usersData = localStorage.getItem('usersData');
            try {
                const usersArray = JSON.parse(usersData);
                if (Array.isArray(usersArray)) {
                    return usersArray;
                } else {
                    return [];
                }
            } catch (error) {
                console.error('Error parsing user data:', error);
                return [];
            }
        }

        // Function to check if the user is logged in based on cookie data
        function checkIfLoggedIn() {
            const userDataCookie = document.cookie.split(';').find(cookie => cookie.trim().startsWith('userData='));
            return !!userDataCookie;
        }

        document.addEventListener("DOMContentLoaded", function() {
            const usersData = getUserDataArrayFromLocalStorage();
            const isLoggedIn = checkIfLoggedIn();

            const userIcon = document.getElementById('userIcon');
            const cartIcon = document.querySelector('.user-options a[href="cart.html"]');
            const loginBtn = document.getElementById('login-btn');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');

            // If the user is already logged in, redirect to profile page
            if (isLoggedIn) {
                window.location.href = 'profile.htm';
            }

            loginBtn.addEventListener('click', function() {
                const email = emailInput.value.trim();
                const password = passwordInput.value.trim();

                let loggedInUser = null;

                // Loop through the users array to find the user with the matching email
                for (let i = 0; i < usersData.length; i++) {
                    if (usersData[i].email === email) {
                        // If the email matches, check the password
                        if (usersData[i].password === password) {
                            // Successful login
                            loggedInUser = usersData[i];
                            break;
                        } else {
                            // Password mismatch
                            alert('Invalid password.');
                            return; // Exit the function if password is incorrect
                        }
                    }
                }

                if (loggedInUser) {
                    // User found, proceed with login
                    document.cookie = `userData=${encodeURIComponent(JSON.stringify(loggedInUser))};`;
                    alert(`Congratulations! Login successful, ${loggedInUser.name}`);
                    // Redirect the user to the profile page
                    window.location.href = 'profile.htm';
                } else {
                    // User not found
                    alert('Email not found.');
                }
            });

            // Function to create a button element
            function createButton(text, href) {
                const button = document.createElement('a');
                button.href = href;
                button.textContent = text;
                button.classList.add('login-btn');
                button.classList.add('signup-btn');
                button.classList.add('user-icon'); // Add the class to style it similar to the user icon
                return button;
            }

            // If the user is not logged in, replace user icon and cart icon with login and signup buttons
            if (!isLoggedIn) {
                // Create login and signup buttons
                const loginButton = createButton('Log In', 'login.html');
                const signupButton = createButton('Sign Up', 'signup.html');

                // Replace user icon with login button
                userIcon.replaceWith(loginButton);

                // Remove cart icon
                cartIcon.replaceWith(signupButton);
            }
        });
    </script>

</body>


</html>