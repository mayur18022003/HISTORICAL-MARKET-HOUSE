<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>
    <script src="https://kit.fontawesome.com/bbd157cb26.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">



</head>

<body>
    <header id="main-header">
        <div class="container">

            <nav>
                <div class="container">
                    <div class="logo">
                        <h1>Historical E-Commerce Website</h1>
                        <!-- Name of the web application -->
                    </div>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="shop.html">Shop</a></li>
                        <li><a href="Aboutus.html">About</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contactus.html">Contact</a></li>
                    </ul>

                    <div class="user-options">
                        <a href="#" class="user-icon" id="userIcon"><i class="fa-solid fa-user fa-xl" style="color: #ffffff; margin-right: 10px;"></i></a>
                        <!-- Sign in icon or link -->
                        <div class="dropdown-content" id="dropdownContent">
                            <a href="login.html">Log In</a>
                            <a href="signup.html">Sign Up</a>
                            <a href="profile.htm">Account</a>

                        </div>
                        <a href="cart.html"><i class="fa-solid fa-cart-shopping fa-xl" style="color: #ffffff;margin-left: 20px "></i></a>
                        <!-- Cart icon or link -->
                    </div>
                </div>
            </nav>

        </div>
    </header>
    <div class="containersignup">
        <div id="signup-container" class="signup-container">
            <div class="logolog">
                <img src="images\logo-removebg-preview.png" alt="Ecom App Logo">
            </div>
            <h2 style="margin-bottom:20px;">Signup</h2>
            <input type="text" id="name" placeholder="Name">
            <div id="name-error" class="error"></div>
            <div class="gendersignup">
                <label for="male">Male</label>
                <input type="radio" id="male" name="gender" value="male">
                <label for="female">Female</label>
                <input type="radio" id="female" name="gender" value="female">
            </div>
            <input type="text" id="contact" placeholder="Contact Number">
            <div id="contact-error" class="error"></div>
            <input type="email" id="email" placeholder="Email Address">
            <div id="email-error" class="error"></div>
            <input type="password" id="password" placeholder="Password">
            <div id="password-strength"></div>
            <input type="password" id="confirm-password" placeholder="Confirm Password">
            <div id="confirm-password-error" class="error"></div>
            <a href="login.html" id="loginback" style="margin-top:20px">Do you already have an account?<br> </a>
            <button id="signup-btn" style="margin-top:10px;">Sign Up</button>
        </div>
    </div>

    <footer class="footer">

        <div class="footer-top">
            <div class="containerfooter">

                <div class="footer-brand">

                    <a href="#" class="logo">
                        <img class="imglogo" src="images/logo-removebg-preview.png" alt="Casmart logo">
                    </a>

                    <p class="footer-text">
                        Historical Ecom is a fashion theme for presents a complete wardrobe of uniquely crafted Idols, Boxes, Mask and Heads, Candle Stand,Christian Arts, Kitchen Ware, Folk Art.
                    </p>

                    <ul class="social-list">

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-facebook-f fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-x-twitter fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-instagram fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="social-link">
                                <i class="fa-brands fa-pinterest-p fa-xl" style="color: #ffffff;"></i>
                            </a>
                        </li>

                    </ul>

                </div>

                <ul class="footer-list">

                    <li>
                        <p class="footer-list-title">Information</p>
                    </li>

                    <li>
                        <a href="#" class="footer-link">About Company</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Payment Type</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Awards Winning</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">World Media Partner</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Become an Agent</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Refund Policy</a>
                    </li>

                </ul>

                <ul class="footer-list">

                    <li>
                        <p class="footer-list-title">Category</p>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Idols</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Boxes</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Masks And Heads</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Candle Stand</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Christian Art</a>
                    </li>

                    <li>
                        <a href="# " class="footer-link ">Prints And Oleographs</a>
                    </li>

                </ul>

                <ul class="footer-list">

                    <li>
                        <p class="footer-list-title">Help & Support</p>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Dealers & Agents</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">FAQ Information</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Return Policy</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Shipping & Delivery</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">Order Tranking</a>
                    </li>

                    <li>
                        <a href="#" class="footer-link">List of Shops</a>
                    </li>

                </ul>

            </div>
        </div>

        <div class="footer-bottom">
            <div class="containerfooterbtm">

                <p class="copyright">
                    &copy; 2022 <a href="#">Mayur Kumbhar</a>. All Rights Reserved
                </p>

                <ul class="footer-bottom-list">

                    <li>
                        <a href="#" class="footer-bottom-link">Privacy Policy</a>
                    </li>

                    <li>
                        <a href="#" class="footer-bottom-link">Terms & Conditions</a>
                    </li>

                    <li>
                        <a href="#" class="footer-bottom-link">Sitemap</a>
                    </li>

                </ul>

                <div class="payment">
                    <p class="payment-title">We Support</p>

                    <img src="images/payment-img.png" alt="Online payment logos" class="payment-img">
                </div>

            </div>
        </div>

    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Check if the user is logged in based on cookie data
            const isLoggedIn = checkIfLoggedIn(); // Function to check if the user is logged in, you need to implement this

            // Get user icon and cart icon elements
            const userIcon = document.getElementById('userIcon');
            const cartIcon = document.querySelector('.user-options a[href="cart.html"]');

            // If the user is not logged in, replace user icon and cart icon with login and signup buttons
            if (!isLoggedIn) {
                // Create login and signup buttons
                const loginButton = createButton('Log In', 'login.html');
                const signupButton = createButton('Sign Up', 'signup.html');

                // Replace user icon with login button
                userIcon.replaceWith(loginButton);

                // Remove cart icon
                cartIcon.replaceWith(signupButton);
            }

            // Function to create a button element
            function createButton(text, href) {
                const button = document.createElement('a');
                button.href = href;
                button.textContent = text;
                button.classList.add('login-btn');
                button.classList.add('signup-btn');
                button.classList.add('user-icon'); // Add the class to style it similar to the user icon
                return button;
            }

            function checkIfLoggedIn() {
                // Find the userData cookie
                const userDataCookie = document.cookie.split(';').find(cookie => cookie.trim().startsWith('userData='));

                // If userData cookie is found, the user is logged in
                if (userDataCookie) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        // Selecting all input fields
        const nameInput = document.getElementById('name');
        const contactInput = document.getElementById('contact');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirm-password');
        const nameError = document.getElementById('name-error');
        const contactError = document.getElementById('contact-error');
        const emailError = document.getElementById('email-error');
        const confirmPasswordError = document.getElementById('confirm-password-error');
        const passwordStrength = document.getElementById('password-strength');
        const signupBtn = document.getElementById('signup-btn');

        // Adding input event listeners to all input fields for real-time validation
        nameInput.addEventListener('input', validateName);
        contactInput.addEventListener('input', validateContact);
        emailInput.addEventListener('input', validateEmail);
        passwordInput.addEventListener('input', validatePassword);
        confirmPasswordInput.addEventListener('input', validateConfirmPassword);

        // Function to validate name
        function validateName() {
            const name = nameInput.value.trim();
            if (!/^[a-zA-Z ]+$/.test(name)) {
                nameError.textContent = 'Name should contain only letters';
            } else {
                nameError.textContent = '';
            }
        }

        // Function to validate contact number
        function validateContact() {
            const contact = contactInput.value.trim();
            if (!/^\d{10}$/.test(contact)) {
                contactError.textContent = 'Enter number in correct format';
            } else {
                contactError.textContent = '';
                checkContactExistence(contact);
            }
        }

        // Function to check if contact number already exists
        function checkContactExistence(contact) {
            const users = getUserDataArrayFromLocalStorage();
            const existingUser = users.find(user => user.contact === contact);
            if (existingUser) {
                contactError.textContent = 'Account already exists';
            }
        }

        // Function to validate email address
        function validateEmail() {
            const email = emailInput.value.trim();
            if (!/^\S+@\S+\.\S+$/.test(email)) {
                emailError.textContent = 'Email is not in correct format';
            } else {
                emailError.textContent = '';
                checkEmailExistence(email);
            }
        }

        // Function to check if email already exists
        function checkEmailExistence(email) {
            const users = getUserDataArrayFromLocalStorage();
            const existingUser = users.find(user => user.email === email);
            if (existingUser) {
                emailError.textContent = 'Account already exists';
            }
        }


        // Function to validate password strength
        function validatePassword() {
            const password = passwordInput.value.trim();
            if (password.length === 0) {
                passwordStrength.textContent = '';
            } else if (password.length < 6) {
                passwordStrength.textContent = 'Weak';
            } else if (password.length < 10) {
                passwordStrength.textContent = 'Medium';
            } else {
                passwordStrength.textContent = 'Strong';
            }
        }

        // Function to validate confirm password
        function validateConfirmPassword() {
            const password = passwordInput.value.trim();
            const confirmPassword = confirmPasswordInput.value.trim();
            if (password !== confirmPassword) {
                confirmPasswordError.textContent = 'Passwords do not match';
            } else {
                confirmPasswordError.textContent = '';
            }
        }

        // Function to store user data array in local storage
        function storeUserDataArrayInLocalStorage(users) {
            // Convert the user array to a JSON string
            const usersData = JSON.stringify(users);

            // Store the user array in local storage
            localStorage.setItem('usersData', usersData);
        }




        // Function to retrieve user data array from local storage
        function getUserDataArrayFromLocalStorage() {
            // Retrieve user data array from local storage
            const usersData = localStorage.getItem('usersData');

            try {
                // Try parsing the JSON string to get the user array
                const usersArray = JSON.parse(usersData);

                // Check if the parsed data is an array
                if (Array.isArray(usersArray)) {
                    return usersArray;
                } else {
                    // If not an array, return an empty array
                    return [];
                }
            } catch (error) {
                // If parsing fails, return an empty array
                console.error('Error parsing user data:', error);
                return [];
            }
        }

        // Adding click event listener to the signup button for final validation before submission
        signupBtn.addEventListener('click', function(event) {
            // Prevent default form submission
            event.preventDefault();

            // Trigger real-time validation for all fields
            validateName();
            validateContact();
            validateEmail();
            validatePassword();
            validateConfirmPassword();

            // Check if all fields are valid before submitting
            if (nameError.textContent === '' &&
                contactError.textContent === '' &&
                emailError.textContent === '' &&
                passwordStrength.textContent !== '' &&
                confirmPasswordError.textContent === '') {

                // Get user input values
                const name = nameInput.value.trim();
                const contact = contactInput.value.trim();
                const email = emailInput.value.trim();
                const password = passwordInput.value.trim();


                // Create a user object with the input values
                const user = {
                    name: name,
                    contact: contact,
                    email: email,
                    password: password,
                    address: '',
                };

                // Retrieve existing user data array from local storage
                const users = getUserDataArrayFromLocalStorage();

                // Check if user with the same email or contact number already exists
                const existingUserByEmail = users.find(user => user.email === email);
                const existingUserByContact = users.find(user => user.contact === contact);

                if (existingUserByEmail || existingUserByContact) {
                    alert('Account already exists');
                } else {
                    // Add the new user to the array
                    users.push(user);

                    // Store updated user data array in local storage
                    storeUserDataArrayInLocalStorage(users);

                    // Inform the user that signup was successful
                    alert('Signup successful!');

                    // Redirect to login page
                    window.location.href = 'login.html';
                }
            } else {
                alert('Please fill out the form correctly.');
            }
        });

        // Retrieve user data array from local storage
        const usersData = getUserDataArrayFromLocalStorage();

        // Display user data array in the console
        console.log(usersData);
    </script>




</body>

</html>